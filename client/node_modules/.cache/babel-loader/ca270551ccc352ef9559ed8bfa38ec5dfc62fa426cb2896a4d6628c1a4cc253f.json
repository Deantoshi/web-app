{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CSVViewer(){const[files,setFiles]=useState([]);const[selectedFile,setSelectedFile]=useState('');const[fileContent,setFileContent]=useState([]);useEffect(()=>{axios.get('/api/files').then(response=>{setFiles(response.data);if(response.data.length>0){setSelectedFile(response.data[0]);}}).catch(error=>console.error('Error fetching files:',error));},[]);useEffect(()=>{if(selectedFile){axios.get(\"/api/file/\".concat(selectedFile)).then(response=>setFileContent(response.data)).catch(error=>console.error('Error fetching file content:',error));}},[selectedFile]);const handleFileChange=event=>{setSelectedFile(event.target.value);};const handleDownload=()=>{if(selectedFile){window.location.href=\"/download/\".concat(selectedFile);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"CSV Viewer\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedFile,onChange:handleFileChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a file\"}),files.map((file,index)=>/*#__PURE__*/_jsx(\"option\",{value:file,children:file},index))]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,disabled:!selectedFile,children:\"Download\"}),fileContent.length>0&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(fileContent[0]).map(key=>/*#__PURE__*/_jsx(\"th\",{children:key},key))})}),/*#__PURE__*/_jsx(\"tbody\",{children:fileContent.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.values(row).map((value,i)=>/*#__PURE__*/_jsx(\"td\",{children:value},i))},index))})]})]});}export default CSVViewer;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","CSVViewer","files","setFiles","selectedFile","setSelectedFile","fileContent","setFileContent","get","then","response","data","length","catch","error","console","concat","handleFileChange","event","target","value","handleDownload","window","location","href","children","onChange","map","file","index","onClick","disabled","Object","keys","key","row","values","i"],"sources":["/home/ddean/conclave-api/client/src/FileDownloader.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nfunction CSVViewer() {\n  const [files, setFiles] = useState([]);\n  const [selectedFile, setSelectedFile] = useState('');\n  const [fileContent, setFileContent] = useState([]);\n\n  useEffect(() => {\n    axios.get('/api/files')\n      .then(response => {\n        setFiles(response.data);\n        if (response.data.length > 0) {\n          setSelectedFile(response.data[0]);\n        }\n      })\n      .catch(error => console.error('Error fetching files:', error));\n  }, []);\n\n  useEffect(() => {\n    if (selectedFile) {\n      axios.get(`/api/file/${selectedFile}`)\n        .then(response => setFileContent(response.data))\n        .catch(error => console.error('Error fetching file content:', error));\n    }\n  }, [selectedFile]);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.value);\n  };\n\n  const handleDownload = () => {\n    if (selectedFile) {\n      window.location.href = `/download/${selectedFile}`;\n    }\n  };\n\n  return (\n    <div>\n      <h2>CSV Viewer</h2>\n      <select value={selectedFile} onChange={handleFileChange}>\n        <option value=\"\">Select a file</option>\n        {files.map((file, index) => (\n          <option key={index} value={file}>{file}</option>\n        ))}\n      </select>\n      <button onClick={handleDownload} disabled={!selectedFile}>Download</button>\n      \n      {fileContent.length > 0 && (\n        <table>\n          <thead>\n            <tr>\n              {Object.keys(fileContent[0]).map(key => (\n                <th key={key}>{key}</th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {fileContent.map((row, index) => (\n              <tr key={index}>\n                {Object.values(row).map((value, i) => (\n                  <td key={i}>{value}</td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n}\n\nexport default CSVViewer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}